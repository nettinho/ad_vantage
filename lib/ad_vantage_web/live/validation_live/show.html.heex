<.header>
  Validación de <%= @campaign.name %> - <%= @variation.name %>
  <:actions>
    <.link patch={~p"/validations/#{@validation}/show/edit"} phx-click={JS.push_focus()}>
      <.button>Edit validation</.button>
    </.link>
  </:actions>
</.header>

<.list>
  <:item title={gettext("Estado")}><%= @validation.status %></:item>
  <:item title={gettext("Fecha")}><%= @validation.inserted_at %></:item>
  <:item title={gettext("Validez")}><%= @validation.valid_rate * 100 %>%</:item>
  <:item title={gettext("Errores")}>
    <.inner_list>
      <:item :for={{key, text} <- parse_errors(@validation.results)} title={key}>
        <%= text %>
      </:item>
    </.inner_list>
  </:item>
  <:item title={gettext("Contenido de la respuesta")}><%= @validation.message %></:item>
  <:item title={gettext("Contenido de la respuesta")}><%= @validation.raw_results %></:item>
</.list>

<.back navigate={~p"/campaigns/#{@campaign.id}/variations/#{@campaign_variation_id}"}>
  <%= gettext("Volver a la variación") %>
</.back>

<.modal
  :if={@live_action == :edit}
  id="validation-modal"
  show
  on_cancel={JS.patch(~p"/validations/#{@validation}")}
>
  <.live_component
    module={AdVantageWeb.ValidationLive.FormComponent}
    id={@validation.id}
    title={@page_title}
    action={@live_action}
    validation={@validation}
    patch={~p"/validations/#{@validation}"}
  />
</.modal>
